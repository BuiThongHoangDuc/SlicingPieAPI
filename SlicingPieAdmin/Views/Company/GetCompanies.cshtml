
@{
    ViewData["Title"] = "GetCompanies";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

    <div class="container">
        <div class="d-flex flex-row-reverse bd-highlight">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#add"><span class="glyphicon glyphicon-plus"></span></button>
        </div>
      
        <div class="row">


            <div class="col-md-12">
                <div class="table-responsive">


                    <table id="mytable" class="table table-bordred table-striped">

                        <thead>
                        <th>Company ID</th>
                        <th>Company Name</th>
                        <th>Company Icon</th>
                        <th>Non Cash Multiplier</th>
                        <th>Cash Multiplier</th>
                        <th>Cash per slice</th>
                        <th>Edit</th>
                        <th>Delete</th>
                        <th>Info</th>
                        </thead>
                        <tbody>

                            @foreach (var company in ViewData["Companies"] as IList<Company>)
                            {
                                <tr>
                                    <td>@company.CompanyId</td>
                                    <td class="CPN-@company.CompanyId">@company.CompanyName</td>
                                    <td class="CPI-@company.CompanyId"><img src=@company.ComapnyIcon width="50" height="50" /></td>
                                    <td class="CPNC-@company.CompanyId">@company.NonCashMultiplier</td>
                                    <td class="CPC-@company.CompanyId">@company.CashMultiplier</td>
                                    <td class="CPS-@company.CompanyId">@company.CashPerSlice</td>


                                    <td><p data-placement="top" data-toggle="tooltip" title="Edit"><button class="btn btn-primary btn-xs editidentifyingClass" data-title="Edit" data-toggle="modal" data-target="#edit" data-id="@company.CompanyId"><span class="glyphicon glyphicon-pencil"></span></button></p></td>
                                    <td><p data-placement="top" data-toggle="tooltip" title="Delete"><button onclick="window.location.href='/Companies/delete/@company.CompanyId'" class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete"><span class="glyphicon glyphicon-trash"></span></button></p></td>
                                    <td><p data-placement="top" data-toggle="tooltip" title="Info"><button class="btn btn-info btn-xs identifyingClass" data-title="Info" data-toggle="modal" data-target="#info" data-id=@company.CompanyId><span class="glyphicon glyphicon-info-sign"></span></button></p></td>

                                </tr>

                            }
                        </tbody>

                    </table>


                    <!-- Modal -->
                    <div class="modal fade" id="info" tabindex="-1" role="dialog" aria-labelledby="my_modalLabel">
                        <div class="modal-dialog" role="dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel"></h4>
                                </div>
                                <div class="modal-body">


                                    <a class="btn btn-info" id="Contribution" role="button">Contribution History</a>
                                    <a class="btn btn-info" id="StakeHolder" role="button">List StakeHolder</a>

                                    <input type="hidden" name="hiddenValue" id="hiddenValue" value="" />
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                                </div>
                            </div>
                        </div>


                        <script type="text/javascript">
                            $(function () {
                                $(".identifyingClass").click(function () {
                                    var my_id_value = $(this).data('id');
                                    $(".modal-body #hiddenValue").val(my_id_value);
                                    var linkToContributor = "/Companies/" + my_id_value + "/Contribution";
                                    var linkToStakeHolder = "/Companies/" + my_id_value + "/stake-holder";
                                    document.getElementById("Contribution").setAttribute("href", linkToContributor);
                                    document.getElementById("StakeHolder").setAttribute("href", linkToStakeHolder);

                                })
                            });
                        </script>




                    </div>



                    <!--Modal For Edit-->
                    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="my_modalLabel">
                        <div class="modal-dialog" role="dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel"></h4>
                                </div>
                                <div class="modal-body">

                                    <form class="form-horizontal EditCompanyForm" role="form" method="post">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CompanyId">Company ID</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control CompanyIDField"
                                                       id="CompanyId" name="CompanyId" placeholder="Company ID" disabled />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CompanyName">Company Name</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control CompanyNameField"
                                                       id="CompanyName" name="CompanyName" placeholder="CompanyName" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="ComapnyIcon">Company Icon</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control CompanyIconField"
                                                       id="ComapnyIcon" name="ComapnyIcon" placeholder="Company Icon" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="NonCashMultiplier">Non Cash Multiplier</label>
                                            <div class="col-sm-10">
                                                <input type="number" class="form-control CompanyNonCashField"
                                                       id="NonCashMultiplier" name="NonCashMultiplier" placeholder="Non Cash Multiplier" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CashMultiplier">Cash Multiplier</label>
                                            <div class="col-sm-10">
                                                <input type="number" class="form-control CompanyCashField"
                                                       id="CashMultiplier" name="CashMultiplier" placeholder="Cash Multiplier" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CashPerSlice">Cash Per Slice</label>
                                            <div class="col-sm-10">
                                                <input type="number" class="form-control CompanyPerSliceField"
                                                       id="CashPerSlice" name="CashPerSlice" placeholder="Cash Per Slice" />
                                            </div>
                                        </div>



                                        <div class="form-group">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <button type="submit" class="btn btn-default">Save</button>
                                            </div>
                                        </div>
                                    </form>


                                    <script type="text/javascript">
                                        $(function () {
                                            $(".editidentifyingClass").click(function () {
                                                var my_id_value = $(this).data('id');
                                                $(".CompanyIDField").val(my_id_value);
                                                $(".CompanyNameField").val($(".CPN-" + my_id_value).text());

                                                $(".CompanyIconField").val($(" .CPI-" + my_id_value + " img").attr('src'));

                                                $(".CompanyNonCashField").val($(".CPNC-" + my_id_value).text());
                                                $(".CompanyCashField").val($(".CPC-" + my_id_value).text());
                                                $(".CompanyPerSliceField").val($(".CPS-" + my_id_value).text());


                                                $(".EditCompanyForm").attr("action", "/Companies/" + my_id_value);







                                            })
                                        });
                                    </script>



                                </div>
                            </div>

                        </div>
                    </div>

                    <!--Modal For Add-->
                    <div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="my_modalLabel">
                        <div class="modal-dialog" role="dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel"></h4>
                                </div>
                                <div class="modal-body">

                                    <form class="form-horizontal" role="form" method="post" action="/Companies">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CompanyName">Company Name</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control"
                                                       id="CompanyName" name="CompanyName" placeholder="CompanyName" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="ComapnyIcon">Company Icon</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control"
                                                       id="ComapnyIcon" name="ComapnyIcon" placeholder="Company Icon" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="NonCashMultiplier">Non Cash Multiplier</label>
                                            <div class="col-sm-10">
                                                <input type="number" class="form-control"
                                                       id="NonCashMultiplier" name="NonCashMultiplier" placeholder="Non Cash Multiplier" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CashMultiplier">Cash Multiplier</label>
                                            <div class="col-sm-10">
                                                <input type="number" class="form-control"
                                                       id="CashMultiplier" name="CashMultiplier" placeholder="Cash Multiplier" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label"
                                                   for="CashPerSlice">Cash Per Slice</label>
                                            <div class="col-sm-10">
                                                <input type="number" class="form-control"
                                                       id="CashPerSlice" name="CashPerSlice" placeholder="Cash Per Slice" />
                                            </div>
                                        </div>



                                        <div class="form-group">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <button type="submit" class="btn btn-default">Save</button>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>


